<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Miscellaneous Utilities for Data Cleaning, Analysis, and Reporting • mcrutils</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Miscellaneous Utilities for Data Cleaning, Analysis, and Reporting">
<meta name="description" content="Convenience functions for data cleaning, analysis and reporting, including creating and visualizing year-to-date and quarterly analyses, and determining customer account status for customer churn analysis.">
<meta property="og:description" content="Convenience functions for data cleaning, analysis and reporting, including creating and visualizing year-to-date and quarterly analyses, and determining customer account status for customer churn analysis.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">mcrutils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9007</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/mcrutils.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mcaselli/mcrutils/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="mcrutils">mcrutils<a class="anchor" aria-label="anchor" href="#mcrutils"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of mcrutils is to provide a grab-bag of utility functions that I find useful in my own R projects for data cleaning, analysis, and reporting, including creating and visualizing year-to-date and quarterly analyses, and customer account status/churn analysis.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of mcrutils from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"mcaselli/mcrutils"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<div class="section level3">
<h3 id="data-cleaning">Data cleaning<a class="anchor" aria-label="anchor" href="#data-cleaning"></a>
</h3>
<p>For data frames or tibbles that have character or factor columns storing logical data, as may happen when reading from a database, CSV, or Excel file, use <code><a href="reference/normalize_logicals.html">normalize_logicals()</a></code> to find and convert these columns to logical type. This is a nice one-liner in a <code>dplyr</code> pipe</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mcaselli/mcrutils" class="external-link">mcrutils</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ugly_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  logical_char <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T"</span>, <span class="st">"F"</span>, <span class="st">"T"</span><span class="op">)</span>,</span>
<span>  logical_factor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TRUE"</span>, <span class="st">"FALSE"</span>, <span class="st">"TRUE"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  non_logical_char <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span>,</span>
<span>  non_logical_factor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="st">"y"</span>, <span class="st">"z"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  mixed_char <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"T"</span>, <span class="st">"F"</span>, <span class="st">"a"</span><span class="op">)</span>,</span>
<span>  mixed_factor <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TRUE"</span>, <span class="st">"FALSE"</span>, <span class="st">"x"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  numeric_col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.1</span>, <span class="fl">2.2</span>, <span class="fl">3.3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">ugly_data</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/normalize_logicals.html">normalize_logicals</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Converted "logical_char" and "logical_factor" columns to logical.</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 7</span></span>
<span><span class="co">#&gt;   logical_char logical_factor non_logical_char non_logical_factor mixed_char</span></span>
<span><span class="co">#&gt;   &lt;lgl&gt;        &lt;lgl&gt;          &lt;chr&gt;            &lt;fct&gt;              &lt;chr&gt;     </span></span>
<span><span class="co">#&gt; 1 TRUE         TRUE           a                x                  T         </span></span>
<span><span class="co">#&gt; 2 FALSE        FALSE          b                y                  F         </span></span>
<span><span class="co">#&gt; 3 TRUE         TRUE           c                z                  a         </span></span>
<span><span class="co">#&gt; # ℹ 2 more variables: mixed_factor &lt;fct&gt;, numeric_col &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="customer-account-statuschurn">Customer account status/churn<a class="anchor" aria-label="anchor" href="#customer-account-statuschurn"></a>
</h3>
<p><code><a href="reference/accounts_by_status.html">accounts_by_status()</a></code> takes order data (account IDs and order dates) and categorizes accounts into different statuses (new, returning, temporarily lost, regained, terminally lost) based on their order behavior in each time interval (months, weeks, quarters, etc are supported).</p>
<p>It also produces a running list of cumulative accounts. This function is useful for understanding customer retention and churn. (counts of accounts in each status category can be included as well; set <code>with_counts = TRUE</code>).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1234</span><span class="op">)</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">25</span></span>
<span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2022-01-01"</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2022-06-30"</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span></span>
<span><span class="va">orders</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  account_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  order_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">dates</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">orders</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/accounts_by_status.html">accounts_by_status</a></span><span class="op">(</span><span class="va">account_id</span>, <span class="va">order_date</span><span class="op">)</span></span>
<span><span class="co">#&gt;   period_start period_end              active              new returning</span></span>
<span><span class="co">#&gt; 1   2022-01-01 2022-01-31                b, h             b, h          </span></span>
<span><span class="co">#&gt; 2   2022-02-01 2022-02-28 b, c, d, e, f, i, j c, d, e, f, i, j         b</span></span>
<span><span class="co">#&gt; 3   2022-03-01 2022-03-31                d, f                       d, f</span></span>
<span><span class="co">#&gt; 4   2022-04-01 2022-04-30          d, e, g, h                g         d</span></span>
<span><span class="co">#&gt; 5   2022-05-01 2022-05-31             e, f, h                       e, h</span></span>
<span><span class="co">#&gt; 6   2022-06-01 2022-06-30                f, j                          f</span></span>
<span><span class="co">#&gt;   regained temporarily_lost terminally_lost                cumulative</span></span>
<span><span class="co">#&gt; 1                                                                b, h</span></span>
<span><span class="co">#&gt; 2                         h                    b, h, c, d, e, f, i, j</span></span>
<span><span class="co">#&gt; 3                      e, j         b, c, i    b, h, c, d, e, f, i, j</span></span>
<span><span class="co">#&gt; 4     e, h                f                 b, h, c, d, e, f, i, j, g</span></span>
<span><span class="co">#&gt; 5        f                             d, g b, h, c, d, e, f, i, j, g</span></span>
<span><span class="co">#&gt; 6        j                             e, h b, h, c, d, e, f, i, j, g</span></span></code></pre></div>
<p><code><a href="reference/plot_accounts_by_status.html">plot_accounts_by_status()</a></code> creates a line plot of the count of each account status over time.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">orders</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/plot_accounts_by_status.html">plot_accounts_by_status</a></span><span class="op">(</span><span class="va">account_id</span>, <span class="va">order_date</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-plot_accounts_by_status-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="business-days">Business days<a class="anchor" aria-label="anchor" href="#business-days"></a>
</h3>
<p><code><a href="reference/periodic_bizdays.html">periodic_bizdays()</a></code> calculates the number of business days in each periodic interval (e.g., monthly, quarterly) between two dates, using calendars from <code>QuantLib</code> (see R package <code>qlcal</code>) for holiday definitions.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/periodic_bizdays.html">periodic_bizdays</a></span><span class="op">(</span></span>
<span>  from <span class="op">=</span> <span class="st">"2025-01-01"</span>,</span>
<span>  to <span class="op">=</span> <span class="st">"2025-12-31"</span>,</span>
<span>  by <span class="op">=</span> <span class="st">"quarter"</span>,</span>
<span>  quantlib_calendars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"UnitedStates"</span>, <span class="st">"UnitedKingdom"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 8 × 4</span></span>
<span><span class="co">#&gt;   calendar      start      end        business_days</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;         &lt;date&gt;     &lt;date&gt;             &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 UnitedStates  2025-01-01 2025-03-31            61</span></span>
<span><span class="co">#&gt; 2 UnitedStates  2025-04-01 2025-06-30            63</span></span>
<span><span class="co">#&gt; 3 UnitedStates  2025-07-01 2025-09-30            64</span></span>
<span><span class="co">#&gt; 4 UnitedStates  2025-10-01 2025-12-31            62</span></span>
<span><span class="co">#&gt; 5 UnitedKingdom 2025-01-01 2025-03-31            63</span></span>
<span><span class="co">#&gt; 6 UnitedKingdom 2025-04-01 2025-06-30            61</span></span>
<span><span class="co">#&gt; 7 UnitedKingdom 2025-07-01 2025-09-30            65</span></span>
<span><span class="co">#&gt; 8 UnitedKingdom 2025-10-01 2025-12-31            64</span></span></code></pre></div>
<p>This is handy when analyzing data summarized by month or quarter and you want to adjust for business days in each period.</p>
<p><code><a href="reference/bizday_of_period.html">bizday_of_period()</a></code> calculates the business day of the period (month, quarter, or year) for a given date and calendar.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/bizday_of_period.html">bizday_of_period</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-06-17"</span><span class="op">)</span>, <span class="st">"UnitedStates"</span>, period <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 12</span></span>
<span><span class="fu"><a href="reference/bizday_of_period.html">bizday_of_period</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-06-17"</span><span class="op">)</span>, <span class="st">"UnitedStates"</span>, period <span class="op">=</span> <span class="st">"year"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 116</span></span></code></pre></div>
<p>This is useful for creating a cumulative “burn-up” chart tracking mid-period progress against e.g. the prior year (See vignette(“mcrutils”) for an example).</p>
</div>
<div class="section level3">
<h3 id="year-to-date-helpers">Year-to-date helpers<a class="anchor" aria-label="anchor" href="#year-to-date-helpers"></a>
</h3>
<p><code>mcrutils</code> provides a handful functions that can be helpful in creating year-to-date analyses</p>
<p>Below we have 2.5 years of historical sales data ending on June 1, 2025.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">sales</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span></span>
<span>    from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2023-01-01"</span><span class="op">)</span>,</span>
<span>    to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2025-06-01"</span><span class="op">)</span>,</span>
<span>    by <span class="op">=</span> <span class="st">"month"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  amount <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span><span class="fl">30</span>, lambda <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sales</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 2</span></span>
<span><span class="co">#&gt;   date       amount</span></span>
<span><span class="co">#&gt;   &lt;date&gt;      &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1 2023-01-01     94</span></span>
<span><span class="co">#&gt; 2 2023-02-01    111</span></span>
<span><span class="co">#&gt; 3 2023-03-01     83</span></span>
<span><span class="co">#&gt; 4 2023-04-01    101</span></span>
<span><span class="co">#&gt; 5 2023-05-01    117</span></span>
<span><span class="co">#&gt; 6 2023-06-01    104</span></span></code></pre></div>
<p><code><a href="reference/ytd_bounds.html">ytd_bounds()</a></code> gets the start and end of the year-to-date period for the latest year in a vector of dates,</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">bounds</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ytd_bounds.html">ytd_bounds</a></span><span class="op">(</span><span class="va">sales</span><span class="op">$</span><span class="va">date</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2025-01-01" "2025-06-01"</span></span></code></pre></div>
<p>and <code><a href="reference/is_ytd_comparable.html">is_ytd_comparable()</a></code> is a logical vector that indicates whether the dates in a vector are within a year-to-date period relative to a given <code>end_date</code>.</p>
<p>So we can quickly filter the historical data to see how we’re doing in 2025 compared to the same period (i.e. January - June) in 2023 and 2024:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sales</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="reference/is_ytd_comparable.html">is_ytd_comparable</a></span><span class="op">(</span><span class="va">date</span>, <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">bounds</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>ytd_sales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">amount</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 2</span></span>
<span><span class="co">#&gt;    year ytd_sales</span></span>
<span><span class="co">#&gt;   &lt;dbl&gt;     &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1  2023       610</span></span>
<span><span class="co">#&gt; 2  2024       594</span></span>
<span><span class="co">#&gt; 3  2025       600</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="one-line-datatables">one-line datatables<a class="anchor" aria-label="anchor" href="#one-line-datatables"></a>
</h3>
<p><code><a href="reference/auto_dt.html">auto_dt()</a></code> is a one-line function that creates a <code><a href="https://rdrr.io/pkg/DT/man/datatable.html" class="external-link">DT::datatable</a></code> object from a data frame or tibble. It includes buttons to copy or download the data, filter tools, and no rownames. It applies percent, currency, and round formatting to numeric columns, guessing the correct format from the data type and column names. See <code><a href="articles/mcrutils.html">vignette("mcrutils")</a></code> for more examples, including how to specify the set of strings that flag a column as percentage or currency.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">product</span>, <span class="op">~</span><span class="va">weight</span>, <span class="op">~</span><span class="va">revenue</span>, <span class="op">~</span><span class="va">growth_pct</span>,</span>
<span>  <span class="st">"Widget A"</span>, <span class="fl">13.53</span>, <span class="fl">1023.21</span>, <span class="fl">0.051</span>,</span>
<span>  <span class="st">"Widget B"</span>, <span class="fl">22.61</span>, <span class="fl">150.24</span>, <span class="fl">0.103</span>,</span>
<span>  <span class="st">"Widget C"</span>, <span class="fl">40.54</span>, <span class="fl">502.26</span>, <span class="fl">0.021</span>,</span>
<span>  <span class="st">"Widget D"</span>, <span class="fl">34.21</span>, <span class="fl">2000.95</span>, <span class="fl">0.154</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>product <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">product</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/auto_dt.html">auto_dt</a></span><span class="op">(</span>numeric_digits <span class="op">=</span> <span class="fl">1</span>, pct_digits <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<figure><img src="%5Cman%5Cfigures%5CREADME-manual_screenshot_auto_dt.png" alt="auto_dt() output"><figcaption aria-hidden="true">
auto_dt() output
</figcaption></figure>
</div>
<div class="section level3">
<h3 id="quarterly-breaks-and-labels">Quarterly breaks and labels<a class="anchor" aria-label="anchor" href="#quarterly-breaks-and-labels"></a>
</h3>
<p><code><a href="https://scales.r-lib.org/reference/label_date.html" class="external-link">scales::label_date_short()</a></code> is a great function for labeling dates in <code>ggplot2</code>, but unfortunately it can’t support quarterly breaks and labels out of the box.</p>
<p><code><a href="reference/label_quarters_short.html">label_quarters_short()</a></code> generates similar labels for quarterly date breaks, labeling every quarter, but only including the year when it changes from the previous label. <code><a href="reference/breaks_quarters.html">breaks_quarters()</a></code> generates quarterly breaks for date scales.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">economics</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">date</span> <span class="op">&gt;=</span> <span class="st">"2005-05-01"</span>, <span class="va">date</span> <span class="op">&lt;=</span> <span class="st">"2007-03-01"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">pce</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span></span>
<span>    breaks <span class="op">=</span> <span class="fu"><a href="reference/breaks_quarters.html">breaks_quarters</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu"><a href="reference/label_quarters_short.html">label_quarters_short</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-automatic-quarterly-breaks-1.png" width="100%"></p>
<p>By default, <code><a href="reference/breaks_quarters.html">breaks_quarters()</a></code> tries to return a reasonable number of breaks over a wide range of dates, down-sampling to semesters and years as needed. See <code><a href="articles/mcrutils.html">vignette("mcrutils")</a></code> for more examples.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mcaselli/mcrutils/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mcaselli/mcrutils/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing mcrutils</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Michael Caselli <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://app.codecov.io/gh/mcaselli/mcrutils" class="external-link"><img src="https://codecov.io/gh/mcaselli/mcrutils/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/mcaselli/mcrutils/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/mcaselli/mcrutils/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael Caselli.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
